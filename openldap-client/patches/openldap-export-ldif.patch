Patch exposes LDIF reading/writing API. This change is required to replace
mozldap with openldap in FreeIPA project.

Upstream: ITS #6194
Author: Rich Megginson <rmeggins@redhat.com>

--- openldap-2.4.24.orig/include/Makefile.in
+++ openldap-2.4.24/include/Makefile.in
@@ -20,7 +20,8 @@ install-local: FORCE
 	for header in $(srcdir)/lber.h lber_types.h \
 		$(srcdir)/ldap.h $(srcdir)/ldap_cdefs.h \
 		$(srcdir)/ldap_schema.h $(srcdir)/ldap_utf8.h \
-		$(srcdir)/slapi-plugin.h ldap_features.h; \
+		$(srcdir)/slapi-plugin.h ldap_features.h \
+		$(srcdir)/ldif.h ; \
 	do \
 		$(INSTALL) $(INSTALLFLAGS) -m 644 $$header $(DESTDIR)$(includedir); \
 	done
--- openldap-2.4.24.orig/libraries/liblutil/Makefile.in
+++ openldap-2.4.24/libraries/liblutil/Makefile.in
@@ -14,6 +14,9 @@
 ## <http://www.OpenLDAP.org/license.html>.
 
 LIBRARY	= liblutil.a
+
+SHAREDLIB = libldif.la
+
 PROGRAM = testavl
 
 LDAP_INCDIR= ../../include       
@@ -40,6 +43,8 @@ OBJS	= base64.o entropy.o sasl.o signal.
 	meter.o \
 	@LIBOBJS@ $(@PLAT@_OBJS)
 
+SHAREDLIBOBJS = ldif.lo fetch.lo
+
 testavl: $(XLIBS) testavl.o
 	(LTLINK) -o $@ testavl.o $(LIBS)
 
@@ -59,3 +64,19 @@ slapdmsg.res: slapdmsg.rc slapdmsg.bin
 clean-local:
 	$(RM) *.res
 
+all-local: $(SHAREDLIB)
+
+.SUFFIXES: .c .o .lo
+
+.c.lo:
+	$(LTCOMPILE_LIB) $<
+
+$(LIBRARY): $(SHAREDLIBOBJS) version.lo
+
+$(SHAREDLIB): $(SHAREDLIBOBJS) version.lo
+	$(LTLINK_LIB) -o $(SHAREDLIB) $(SHAREDLIBOBJS) version.lo $(LINK_LIBS)
+
+install-local: FORCE
+	-$(MKDIR) $(DESTDIR)$(libdir)
+	$(LTINSTALL) $(INSTALLFLAGS) -m 644 $(SHAREDLIB) $(DESTDIR)$(libdir)
+	$(LTFINISH) $(DESTDIR)$(libdir)

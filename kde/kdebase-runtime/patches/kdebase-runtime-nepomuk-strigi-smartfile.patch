Index: nepomuk/server/nepomukserver.cpp
===================================================================
--- nepomuk/server/nepomukserver.cpp
+++ nepomuk/server/nepomukserver.cpp	2010-07-28 07:47:03.000000000 +0200
@@ -85,6 +85,9 @@
 
             // register the service manager interface
             QDBusConnection::sessionBus().registerObject( "/servicemanager", m_serviceManager );
+
+            KConfig cnf( "kdeglobals" );
+            cnf.group( "KFileDialog Settings" ).writeEntry( "file module", "smartfilemodule" );
         }
         else {
             // stop all running services
@@ -92,6 +95,9 @@
 
             // unregister the service manager interface
             QDBusConnection::sessionBus().unregisterObject( "/servicemanager" );
+            
+            KConfig cnf( "kdeglobals" );
+            cnf.group( "KFileDialog Settings" ).writeEntry( "file module", "kfilemodule" );
         }
     }
 }
Index: nepomuk/services/strigi/eventmonitor.cpp
===================================================================
--- nepomuk/services/strigi/eventmonitor.cpp
+++ nepomuk/services/strigi/eventmonitor.cpp	2010-07-28 07:48:18.000000000 +0200
@@ -46,10 +46,6 @@
       m_pauseState( NotPaused ),
       m_totalIndexingSeconds( 0 )
 {
-    // monitor the powermanagement to not drain the battery
-    connect( Solid::PowerManagement::notifier(), SIGNAL( appShouldConserveResourcesChanged( bool ) ),
-             this, SLOT( slotPowerManagementStatusChanged( bool ) ) );
-
     // setup the avail disk usage monitor
     connect( &m_availSpaceTimer, SIGNAL( timeout() ),
              this, SLOT( slotCheckAvailableSpace() ) );
@@ -76,7 +72,6 @@
                  this, SLOT( slotIndexingSuspended(bool) ) );
     }
 
-    slotPowerManagementStatusChanged( Solid::PowerManagement::appShouldConserveResources() );
 }
 
 

From c2f59f94884a90c38a15dae684bfad4c7d33f83b Mon Sep 17 00:00:00 2001
From: "Lamarque V. Souza" <lamarque@kde.org>
Date: Mon, 18 Jun 2012 12:36:48 -0300
Subject: [PATCH] Fix cmake error when processing openconnect plugin's
 CMakeLists.txt.

---
 plasma_nm_version.h                   |    2 +-
 vpnplugins/openconnect/CMakeLists.txt |   18 ++++++++----------
 2 files changed, 9 insertions(+), 11 deletions(-)

diff --git a/plasma_nm_version.h b/plasma_nm_version.h
index 80e88fd..dd45b3e 100644
--- a/plasma_nm_version.h
+++ b/plasma_nm_version.h
@@ -1,4 +1,4 @@
 #ifndef PLASMA_NM_VERSION_H
 #define PLASMA_NM_VERSION_H
-static const char * plasmaNmVersion = "0.9.0.3 (nm09 20120617)";
+static const char * plasmaNmVersion = "0.9.0.3 (nm09 20120618)";
 #endif
diff --git a/vpnplugins/openconnect/CMakeLists.txt b/vpnplugins/openconnect/CMakeLists.txt
index 31f0c18..9fd7be6 100644
--- a/vpnplugins/openconnect/CMakeLists.txt
+++ b/vpnplugins/openconnect/CMakeLists.txt
@@ -3,18 +3,16 @@ set (MINIMUM_OPENCONNECT_VERSION_REQUIRED "3.99")
 set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_MODULE_PATH})
 
 macro_optional_find_package(OpenConnect ${MINIMUM_OPENCONNECT_VERSION_REQUIRED})
-if (${OPENCONNECT_VERSION})
-  if (${OPENCONNECT_VERSION} VERSION_LESS "3.99")
-    macro_optional_find_package(OpenSSL)
-    macro_log_feature(OPENSSL_FOUND "OpenSSL headers" "Encryption suite" "http://www.openssl.org" FALSE "" "Needed for OpenConnect support in Network Management")
-    if (OPENSSL_FOUND)
-       set (MINIMUM_OPENCONNECT_VERSION_REQUIRED "3.03")
-       set (maybe_OPENSSL_LIBRARIES ${OPENSSL_LIBRARIES})
+if (OPENCONNECT_FOUND)
+    if (${OPENCONNECT_VERSION} VERSION_LESS "3.99")
+        macro_optional_find_package(OpenSSL)
+        macro_log_feature(OPENSSL_FOUND "OpenSSL headers" "Encryption suite" "http://www.openssl.org" FALSE "" "Needed for OpenConnect support in Network Management")
+        if (OPENSSL_FOUND)
+            set (MINIMUM_OPENCONNECT_VERSION_REQUIRED "3.03")
+            set (maybe_OPENSSL_LIBRARIES ${OPENSSL_LIBRARIES})
+        endif()
     endif()
-  endif()
-endif()
 
-if (OPENCONNECT_FOUND)
     if (${OPENCONNECT_VERSION} VERSION_GREATER ${MINIMUM_OPENCONNECT_VERSION_REQUIRED} OR
         ${OPENCONNECT_VERSION} VERSION_EQUAL ${MINIMUM_OPENCONNECT_VERSION_REQUIRED})
 
-- 
1.7.10.4


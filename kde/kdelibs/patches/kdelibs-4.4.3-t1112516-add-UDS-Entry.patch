Index: kio/kio/kfileitem.cpp
===================================================================
--- kio/kio/kfileitem.cpp       (révision 1112515)
+++ kio/kio/kfileitem.cpp       (révision 1112516)
@@ -809,7 +809,7 @@
 
 QStringList KFileItem::overlays() const
 {
-    QStringList names;
+    QStringList names = d->m_entry.stringValue( KIO::UDSEntry::UDS_ICON_OVERLAY_NAMES ).split(',');
     if ( d->m_bLink ) {
         names.append("emblem-symbolic-link");
     }
Index: kio/kio/udsentry.h
===================================================================
--- kio/kio/udsentry.h  (révision 1112515)
+++ kio/kio/udsentry.h  (révision 1112516)
@@ -182,10 +182,10 @@
             /// Name of the file where the link points to
             /// Allows to check for a symlink (don't use S_ISLNK !)
             UDS_LINK_DEST = 14 | UDS_STRING,
-            /// An alternative URL (If different from the caption)
-            /// WARNING: the use of UDS_URL is deprecated, since KDirModel requires
-            /// a hierarchical scheme in the urls used by kioslaves. Use UDS_DISPLAY_NAME
-            /// if you simply want to customize the user-visible filenames, or use
+            /// An alternative URL (If different from the caption).
+            /// Can be used to mix different hierarchies.
+            ///
+            /// Use UDS_DISPLAY_NAME if you simply want to customize the user-visible filenames, or use
             /// UDS_TARGET_URL if you want "links" to unrelated urls.
             UDS_URL = 15 | UDS_STRING,
             /// A mime type; the slave should set it if it's known.
@@ -233,6 +233,13 @@
             /// @since 4.4
             UDS_NEPOMUK_URI = 25 | UDS_STRING,
 
+            /// A comma-separated list of supplementary icon overlays
+            /// which will be added to the list of overlays created
+            /// by KFileItem.
+            ///
+            /// @since 4.5
+            UDS_ICON_OVERLAY_NAMES = 26 | UDS_STRING,
+
             /// Extra data (used only if you specified Columns/ColumnsTypes)
             /// KDE 4.0 change: you cannot repeat this entry anymore, use UDS_EXTRA + i
             /// until UDS_EXTRA_END.


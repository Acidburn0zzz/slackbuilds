diff -up kde-workspace-4.7.3/plasma/generic/dataengines/geolocation/location_gps.cpp.kdebug277036 kde-workspace-4.7.3/plasma/generic/dataengines/geolocation/location_gps.cpp
--- kde-workspace-4.7.3/plasma/generic/dataengines/geolocation/location_gps.cpp.kdebug277036	2011-05-20 15:32:08.000000000 -0500
+++ kde-workspace-4.7.3/plasma/generic/dataengines/geolocation/location_gps.cpp	2011-11-17 10:13:01.629167500 -0600
@@ -83,11 +83,11 @@ Gps::Gps(QObject* parent, const QVariant
 {
 #if GPSD_API_MAJOR_VERSION >= 5
     m_gpsdata = new gps_data_t;
-    gps_open("localhost", DEFAULT_GPSD_PORT, m_gpsdata);
+    if (gps_open("localhost", DEFAULT_GPSD_PORT, m_gpsdata) != -1) {
 #else
     gps_data_t* m_gpsdata = gps_open("localhost", DEFAULT_GPSD_PORT);
-#endif
     if (m_gpsdata) {
+#endif
         kDebug() << "gpsd found.";
         m_gpsd = new Gpsd(m_gpsdata);
         connect(m_gpsd, SIGNAL(dataReady(const Plasma::DataEngine::Data&)),

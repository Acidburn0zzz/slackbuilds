commit 0d03341732268a9b010cfe97c1aa091a5ba24d22
Author: Ulrich Drepper <drepper@redhat.com>
Date:   Wed Dec 23 18:46:03 2009 -0800

    Fix up ChangeLog.

commit 7600da908d431a850a62141fd05a4dd27d960b8a
Author: Ulrich Drepper <drepper@redhat.com>
Date:   Mon Dec 21 14:08:05 2009 -0800

    Handle AT_FDCWD in futimens.

---
 ChangeLog                          |    6 ++++++
 sysdeps/unix/sysv/linux/futimens.c |    5 +++++
 2 files changed, 11 insertions(+), 0 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index c52ad36..b913d73 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,9 @@
+2009-12-21  Ulrich Drepper  <drepper@redhat.com>
+
+	[BZ #10992]
+	* sysdeps/unix/sysv/linux/futimens.c: Handle AT_FDCWD.
+	Patch by Eric Blake <ebb9@byu.net>.
+
 2009-12-15  Ulrich Drepper  <drepper@redhat.com>
 
 	[BZ #11093]
diff --git a/sysdeps/unix/sysv/linux/futimens.c b/sysdeps/unix/sysv/linux/futimens.c
index 67f2588..fe8e920 100644
--- a/sysdeps/unix/sysv/linux/futimens.c
+++ b/sysdeps/unix/sysv/linux/futimens.c
@@ -33,6 +33,11 @@ int
 futimens (int fd, const struct timespec tsp[2])
 {
 #ifdef __NR_utimensat
+  if (fd < 0)
+    {
+      __set_errno (EBADF);
+      return -1;
+    }
   return INLINE_SYSCALL (utimensat, 4, fd, NULL, tsp, 0);
 #else
   __set_errno (ENOSYS);

From e944608b4b47cd349c0a0fe425aa4b0cb1722fb0 Mon Sep 17 00:00:00 2001
From: Andreas Schwab <schwab@redhat.com>
Date: Mon, 18 Jan 2010 07:23:23 -0800
Subject: [PATCH 13/16] Ignore negative dynamic entry types.
 (cherry picked from commit 7a033a828df19b4f3bfd7e4d66102f63d1167f08)

---
 ChangeLog          |    5 +++++
 elf/dynamic-link.h |    2 +-
 2 files changed, 6 insertions(+), 1 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index 1a63648..57582ad 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,8 @@
+2010-01-18  Andreas Schwab  <schwab@redhat.com>
+
+	* elf/dynamic-link.h (elf_get_dynamic_info): Ignore negative
+	dynamic entry types.
+
 2010-01-16  Jakub Jelinek  <jakub@redhat.com>
 
 	* sysdeps/ieee754/ldbl-128/s_ceill.c (huge): Add L suffix to the
diff --git a/elf/dynamic-link.h b/elf/dynamic-link.h
index c34cbcd..dff0655 100644
--- a/elf/dynamic-link.h
+++ b/elf/dynamic-link.h
@@ -113,7 +113,7 @@ elf_get_dynamic_info (struct link_map *l, ElfW(Dyn) *temp)
 
   while (dyn->d_tag != DT_NULL)
     {
-      if (dyn->d_tag < DT_NUM)
+      if ((Elf32_Word) dyn->d_tag < DT_NUM)
 	info[dyn->d_tag] = dyn;
       else if (dyn->d_tag >= DT_LOPROC &&
 	       dyn->d_tag < DT_LOPROC + DT_THISPROCNUM)
-- 
1.7.0


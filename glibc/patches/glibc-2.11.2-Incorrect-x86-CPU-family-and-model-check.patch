X-Git-Url: http://sourceware.org/git/?p=glibc.git;a=blobdiff_plain;f=sysdeps%2Fx86_64%2Fmultiarch%2Finit-arch.c;h=198fcaa8d34efde99deba565d05850fb3af08c42;hp=0fe2f86b4f1b3d4a3c5624a639d3686a5812ff8b;hb=21580967038a0150e330e56508ec4f04fdf0f490;hpb=ef43572852a615b6f85bf3864a6c4f1175a93a19

diff --git a/sysdeps/x86_64/multiarch/init-arch.c b/sysdeps/x86_64/multiarch/init-arch.c
index 0fe2f86..198fcaa 100644
--- a/sysdeps/x86_64/multiarch/init-arch.c
+++ b/sysdeps/x86_64/multiarch/init-arch.c
@@ -62,12 +62,12 @@ __init_cpu_features (void)
       unsigned int eax = __cpu_features.cpuid[COMMON_CPUID_INDEX_1].eax;
       unsigned int extended_family = (eax >> 20) & 0xff;
       unsigned int extended_model = (eax >> 12) & 0xf0;
-      if (__cpu_features.family == 0x0f)
+      if (family == 0x0f)
 	{
 	  family += extended_family;
 	  model += extended_model;
 	}
-      else if (__cpu_features.family == 0x06)
+      else if (family == 0x06)
 	model += extended_model;
     }
   /* This spells out "AuthenticAMD".  */

From 016ab112b8a053c981e20be1be625892eadd7690 Mon Sep 17 00:00:00 2001
From: Ryan S. Arnold <rsa@us.ibm.com>
Date: Thu, 14 Jan 2010 15:59:02 -0800
Subject: [PATCH 06/16] Pass $(sysdep-LDFLAGS) when using --print-file-name.
 (cherry picked from commit 35e6599946c142e1685c9dc46cff55e4ae6aac37)

---
 ChangeLog  |    6 ++++++
 Makeconfig |    8 ++++----
 2 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/ChangeLog b/ChangeLog
index d948ea6..14dfba5 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,9 @@
+2010-01-14  Ryan S. Arnold  <rsa@us.ibm.com>
+
+	* Makeconfig (+prector, +postctor, +prectorS, +postctorS): Add
+	$(sysdep-LDFLAGS) to pre and post ctors so that the proper .o
+	files are found by GCC.
+
 2010-01-14  Ulrich Drepper  <drepper@redhat.com>
 
 	[BZ #11126]
diff --git a/Makeconfig b/Makeconfig
index 9f134cc..15cd4ca 100644
--- a/Makeconfig
+++ b/Makeconfig
@@ -549,11 +549,11 @@ endif
 ifeq ($(elf),yes)
 +preinit = $(addprefix $(csu-objpfx),crti.o)
 +postinit = $(addprefix $(csu-objpfx),crtn.o)
-+prector = `$(CC) --print-file-name=crtbegin.o`
-+postctor = `$(CC) --print-file-name=crtend.o`
++prector = `$(CC) $(sysdep-LDFLAGS) --print-file-name=crtbegin.o`
++postctor = `$(CC) $(sysdep-LDFLAGS) --print-file-name=crtend.o`
 # Variants of the two previous definitions for linking PIE programs.
-+prectorS = `$(CC) --print-file-name=crtbeginS.o`
-+postctorS = `$(CC) --print-file-name=crtendS.o`
++prectorS = `$(CC) $(sysdep-LDFLAGS) --print-file-name=crtbeginS.o`
++postctorS = `$(CC) $(sysdep-LDFLAGS) --print-file-name=crtendS.o`
 +interp = $(addprefix $(elf-objpfx),interp.os)
 endif
 csu-objpfx = $(common-objpfx)csu/
-- 
1.7.0


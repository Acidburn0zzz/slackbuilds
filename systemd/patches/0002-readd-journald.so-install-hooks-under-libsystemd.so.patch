From e288d6a81a7731fd61029db0ff8938f4f3e72856 Mon Sep 17 00:00:00 2001
From: Dave Reisner <dreisner@archlinux.org>
Date: Thu, 20 Feb 2014 09:02:39 -0500
Subject: [PATCH 2/2] readd journald.so install hooks under libsystemd.so

Inadvertently removed in add00dfd1f05.
---
 Makefile.am | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/Makefile.am b/Makefile.am
index c71367d..08b94d7 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -2047,6 +2047,20 @@ libsystemd_la_LIBADD = \
 	$(RT_LIBS) \
 	-lresolv
 
+libsystemd-install-hook:
+	libname=libsystemd.so && $(move-to-rootlibdir)
+	-$(MKDIR_P) $(DESTDIR)/var/log/journal
+	-chown 0:0 $(DESTDIR)/var/log/journal
+	-chmod 755 $(DESTDIR)/var/log/journal
+	-setfacl -nm g:adm:rx,d:g:adm:rx $(DESTDIR)/var/log/journal/
+	-setfacl -nm g:wheel:rx,d:g:wheel:rx $(DESTDIR)/var/log/journal/
+
+libsystemd-uninstall-hook:
+	rm -f $(DESTDIR)$(rootlibdir)/libsystemd.so*
+
+INSTALL_EXEC_HOOKS += libsystemd-install-hook
+UNINSTALL_EXEC_HOOKS += libsystemd-uninstall-hook
+
 pkgconfiglib_DATA += \
 	src/libsystemd/libsystemd.pc
 
-- 
1.9.0


diff -up linphone-3.3.0/configure.in.ext linphone-3.3.0/configure.in
--- linphone-3.3.0/configure.in.ext	2010-05-12 04:53:48.000000000 -0300
+++ linphone-3.3.0/configure.in	2010-05-19 20:34:06.603612558 -0300
@@ -360,7 +360,26 @@ fi
 
 AC_SUBST(STRICT_OPTIONS)
 
-AC_CONFIG_SUBDIRS( mediastreamer2 )
+AC_ARG_ENABLE(external-mediastreamer,
+      [  --enable-external-mediastreamer Use external mediastreamer library],
+      [case "${enableval}" in
+        yes) external_mediastreamer=true ;;
+        no)  external_mediastreamer=false ;;
+        *) AC_MSG_ERROR(bad value ${enableval} for --enable-external-mediastreamer) ;;
+      esac],[external_mediastreamer=false])
+
+if test "$external_mediastreamer" = 'true'; then
+	LP_CHECK_MSTREAMER
+else
+	AC_CONFIG_SUBDIRS( mediastreamer2 )
+	MSTREAMER_CFLAGS="-I\$(top_srcdir)/mediastreamer2/include"
+	MSTREAMER_LIBS="\$(top_builddir)/mediastreamer2/src/libmediastreamer.la"
+fi
+
+AC_SUBST(MSTREAMER_CFLAGS)
+AC_SUBST(MSTREAMER_LIBS)
+
+AM_CONDITIONAL(EXTERNAL_MSTREAMER, [test "$external_mediastreamer" = 'true'])
 
 dnl check for db2html (docbook) to generate html user manual
 AC_CHECK_PROG(have_sgmltools,sgmltools, yes, no)
diff -up linphone-3.3.0/console/Makefile.am.ext linphone-3.3.0/console/Makefile.am
--- linphone-3.3.0/console/Makefile.am.ext	2010-03-25 17:20:15.000000000 -0300
+++ linphone-3.3.0/console/Makefile.am	2010-05-19 20:34:06.604239123 -0300
@@ -9,7 +9,7 @@ INCLUDES = \
 	-I$(top_srcdir)/coreapi\
 	$(ORTP_CFLAGS) \
 	-I$(top_srcdir)/exosip \
-	-I$(top_srcdir)/mediastreamer2/include
+	$(MSTREAMER_CFLAGS)
 
 
 
@@ -22,7 +22,7 @@ endif
 linphonec_SOURCES = linphonec.c linphonec.h commands.c
 linphonec_CFLAGS=$(COMMON_CFLAGS) $(CONSOLE_FLAGS)
 linphonec_LDADD = $(top_builddir)/coreapi/liblinphone.la $(READLINE_LIBS)  \
-		$(top_builddir)/mediastreamer2/src/libmediastreamer.la \
+		$(MSTREAMER_LIBS) \
 		$(ORTP_LIBS) \
 		$(SPEEX_LIBS) \
 		$(OSIP_LIBS)
@@ -41,7 +41,7 @@ sipomatic_CFLAGS= $(COMMON_CFLAGS) $(CON
 
 sipomatic_LDADD= 	$(INTLLIBS)  \
 			$(top_builddir)/coreapi/liblinphone.la \
-			$(top_builddir)/mediastreamer2/src/libmediastreamer.la \
+			$(MSTREAMER_LIBS) \
 			$(ORTP_LIBS) \
 			$(SPEEX_LIBS) \
 			$(OSIP_LIBS)
diff -up linphone-3.3.0/coreapi/Makefile.am.ext linphone-3.3.0/coreapi/Makefile.am
--- linphone-3.3.0/coreapi/Makefile.am.ext	2010-05-12 09:50:07.000000000 -0300
+++ linphone-3.3.0/coreapi/Makefile.am	2010-05-19 20:34:06.604239123 -0300
@@ -10,7 +10,7 @@ linphone_include_HEADERS=linphonecore.h
 
 INCLUDES = \
 	-I$(top_srcdir)\
-	-I$(top_srcdir)/mediastreamer2/include
+	$(MSTREAMER_CFLAGS)
 
 
 lib_LTLIBRARIES=liblinphone.la
@@ -41,7 +41,7 @@ liblinphone_la_LDFLAGS= -version-info $(
 
 liblinphone_la_LIBADD= \
 		$(EXOSIP_LIBS) \
-		$(top_builddir)/mediastreamer2/src/libmediastreamer.la \
+		$(MSTREAMER_LIBS) \
 		$(ORTP_LIBS)
 
 if BUILD_WIN32
diff -up linphone-3.3.0/gtk-glade/Makefile.am.ext linphone-3.3.0/gtk-glade/Makefile.am
--- linphone-3.3.0/gtk-glade/Makefile.am.ext	2010-04-13 10:33:34.000000000 -0300
+++ linphone-3.3.0/gtk-glade/Makefile.am	2010-05-19 20:35:13.255363323 -0300
@@ -46,8 +46,8 @@ linphone_3_SOURCES=	\
 			loginframe.c \
 			linphone.h 
 
-linphone_3_LDADD=$(top_builddir)/oRTP/src/libortp.la \
-		$(top_builddir)/mediastreamer2/src/libmediastreamer.la \
+linphone_3_LDADD=$(ORTP_LIBS) \
+		$(MSTREAMER_LIBS) \
 		$(top_builddir)/coreapi/liblinphone.la \
 			$(LIBGTK_LIBS) $(INTLLIBS) \
 			$(LIBGLADE_LIBS)
@@ -76,7 +76,7 @@ endif
 
 
 AM_CFLAGS= -DIN_LINPHONE -I$(top_srcdir)/coreapi/ \
-		-I$(top_srcdir)/mediastreamer2/include/ \
+		$(MSTREAMER_CFLAGS) \
 		$(ORTP_CFLAGS) \
 		$(LIBGLADE_CFLAGS) $(STRICT_OPTIONS) $(LIBGTK_CFLAGS) $(IPV6_CFLAGS) \
 		$(OSIP_CFLAGS) 
diff -up linphone-3.3.0/m4/mstreamer.m4.ext linphone-3.3.0/m4/mstreamer.m4
--- linphone-3.3.0/m4/mstreamer.m4.ext	2010-05-19 20:34:06.604239123 -0300
+++ linphone-3.3.0/m4/mstreamer.m4	2010-05-19 20:34:06.604239123 -0300
@@ -0,0 +1,11 @@
+AC_DEFUN([LP_CHECK_MSTREAMER],[
+
+PKG_CHECK_MODULES([MSTREAMER], [mediastreamer >= 2.2.3], , [ms_failed=true])
+
+if test "$ms_failed" = "true"; then
+	AC_MSG_ERROR("External mediastreamer library not found")
+fi
+
+AC_SUBST([MSTREAMER_LIBS])
+AC_SUBST([MSTREAMER_CFLAGS])
+])

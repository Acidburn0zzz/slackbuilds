--- src/mediatrc_ffmpeg.cpp.orig	2011-09-19 16:54:33.613421452 -0300
+++ src/mediatrc_ffmpeg.cpp	2011-09-19 17:32:17.033916795 -0300
@@ -26,7 +26,7 @@ extern "C" {
 #include <libavfilter/avcodec.h>
 #include <libavfilter/avfilter.h>
 #include <libavfilter/avfiltergraph.h>
-#include <libavfilter/vsink_buffer.h>
+#include <libavfilter/buffersink.h>
 }
 
 #define AUDIO_BUF_SIZE 50000
@@ -2071,7 +2071,7 @@ bool wxFfmpegMediaTranscoder::OutputPack
 				while (frame_available) {
 					if (ist->st->codec->codec_type == AVMEDIA_TYPE_VIDEO && ost->output_video_filter) {
 						AVRational ist_pts_tb = ost->output_video_filter->inputs[0]->time_base;
-						if (av_vsink_buffer_get_video_buffer_ref(ost->output_video_filter, &ost->picref, 0) < 0)
+						if (av_buffersink_get_buffer_ref(ost->output_video_filter, &ost->picref, 0) < 0)
 							goto cont;
 						if (ost->picref) {
 							avfilter_fill_frame_from_video_buffer_ref(&picture, ost->picref);
